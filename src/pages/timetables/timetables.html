<div class="headers">

  <div class="selectBusLine" *ngIf='isVisibleCkeckBox'>
    <ion-label>Select Bus Line</ion-label>
    <ion-select [(ngModel)]="selectedBusLine" (ngModelChange)="updateSelectedValue($event)" multiple="false">
      <ion-option *ngFor="let busLine of dataProvider.getCheckBoxRoutes()" value="{{busLine.id.id}}"> {{busLine.label}} </ion-option>
    </ion-select>
  </div>

  <div class="dateBox" *ngIf='isVisibleCkeckBox'>
    <ion-label>Date</ion-label>
    <ion-datetime displayFormat="YYYY-MM-DD" min="{{minDate | date:'yyyy-MM-dd'}}" max="{{maxDate | date:'yyyy-MM-dd'}}" [(ngModel)]="selectedDate">
    </ion-datetime>
  </div>

  <div class="searchBar" *ngIf='isVisibleSearchbar'>
    <ion-searchbar (ionInput)="getItems($event)"></ion-searchbar>
  </div>

  <div class="stopDetails" *ngIf='isVisible' class="buttonHide">
    <ion-row>
      <ion-col item-left width-20>
        <button ion-button color="secundary" (click)="hideTimes()"><ion-icon name="arrow-round-back"></ion-icon></button>
      </ion-col>
      <ion-col text-wrap>
        <p text-left> {{stopNameSelected}} </p>
      </ion-col>
    </ion-row>
  </div>
</div>

<ion-content>

  <div *ngIf='isVisibleSearchbar' class="listStops">
    <button ion-button block color="light" (click)="showTimes(stop)" *ngFor="let stop of stopsToShow">
       <div text-wrap> {{ stop.name }} </div>
      </button>
  </div>

  <div class="showTimes" *ngIf='isVisible && timesToShowInList.length !=0'>
    <ion-segment assertive [(ngModel)]="setFirst">
      <ion-segment-button *ngFor="let time of timesToShow ; let i = index" [value]="i" (ionSelect)="selectedLine(time.times)" (ionSelect)="showToast('Line '+time.line.desc)">
        <div [style.backgroundColor]="time.color"> Line {{time.line.desc}} </div>
      </ion-segment-button>
    </ion-segment>
  </div>
  <div class="listTimes" *ngIf='isVisible && timesToShowInList.length !=0'>

    <ion-list no-lines>
      <ion-item style="background-color: darkred; color: #E3F2FD"> Next trips </ion-item>
      <ion-item style="color: red" *ngIf='possibleTimes == [] || possibleTimes.length == 0'> No timetables available </ion-item>
      <ion-item *ngFor="let time of possibleTimes">
        <b>{{time | date: 'dd/MM HH:mm'}}</b>
      </ion-item>

      <ion-item style="background-color: lightseagreen; color: #E3F2FD"> Other times </ion-item>
      <ion-item style="color: green" *ngIf='passedTimes == [] || passedTimes.length == 0'> All timetables are available </ion-item>
      <ion-item *ngFor="let time of passedTimes">
        {{time | date: 'dd/MM HH:mm'}}
      </ion-item>

    </ion-list>
  </div>

  <div class="notTimeAvailable" *ngIf='timesToShowInList.length==0 && isVisible'>
    <ion-row>
      <h2> Not stops time available at this date: <br> {{selectedDate | date: 'yyyy-MMMM-dd'}} </h2>
    </ion-row>
  </div>

</ion-content>