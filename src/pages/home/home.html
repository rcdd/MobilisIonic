<ion-header>
  <!--<ion-buttons end>
        <button ion-button (click)="dataProvider.loading = 1"><ion-icon name="debug"></ion-icon>Debug</button> 
      </ion-buttons> -->
</ion-header>
<ion-content>

  <div id="findbox"></div>
  <div id="debug" *ngIf="debug">{{debug}}</div>

  <div class="progress" *ngIf="dataProvider.innit != 100">
    <img src="assets/img/LogoMobilis.png" />

    <h3>Loading...</h3>
    <div class="progress-bar" [style.width.%]=dataProvider.innit>{{dataProvider.innit}}%</div>
  </div>

  <div id="mapid">
  </div>

  <ion-fab top right *ngIf="dataProvider.innit == 100 && routingControl.itenarary == undefined">
    <button ion-fab mini><ion-icon name="add"></ion-icon></button>
    <ion-fab-list>
      <button ion-fab id="filter" (click)="showBusLines()"> <ion-icon name="list"></ion-icon></button>
      <!-- <button ion-fab id="plan" (click)="showPlanning()"> <ion-icon name="compass"></ion-icon></button> -->
    </ion-fab-list>
  </ion-fab>

  <div id="planning" text-wrap *ngIf='planning.orig.latlng || planning.dest.latlng'>
    <div class="left">
      <div class="origin">
        <label>Origin</label><br />
        <input [(ngModel)]="planning.orig.latlng" type="text" readonly placeholder="Origin coordenates" />
        <!-- <button ion-button (click)="chooseRoute()">(My Location)</button> -->
      </div>
      <div class="dest">
        <label>Destination</label><br />
        <input [(ngModel)]="planning.dest.latlng" type="text" readonly placeholder="Destination coordenates" />
      </div>
    </div>
    <div class="right">
      <button ion-button (click)="chooseRoute()"><ion-icon name="navigate"></ion-icon></button>
      <button ion-button (click)="cancelRoute(true)"><ion-icon name="close"></ion-icon></button>
    </div>
  </div>

  <div id="routing" *ngIf='routingControl.itenarary'>
    <div class="cancelButton">
      <button ion-button (click)="cancelRoute(false)"><ion-icon name="arrow-round-back"></ion-icon></button>
    </div>
    <ion-list-header text-wrap>
      Your possibles itineraries:
    </ion-list-header>
    <ion-list>
      <ion-item *ngFor="let d of routingControl.itenarary; let i=index">
        <div (click)="toggleDetails(d)">
          <ion-row text-wrap>
            <ion-col width-75>
              <h1>Route {{i+1}}</h1>
              <h6> Duration: {{d.duration}} <br /> Walking distance: {{d.walkDistance}}) </h6>
            </ion-col>
            <ion-col width-10>
              <ion-icon color="primary" item-right [name]="d.icon"></ion-icon>
            </ion-col>
            <ion-col width-10>
              <button ion-button (click)="showRoute(d)">GO</button>
            </ion-col>
          </ion-row>
        </div>
        <div *ngIf="d.showDetails">
          <ion-item class="subItemLegs" *ngFor="let l of d.legs">
            <ion-row (click)="toggleSubDetails(l, d.legs)">
              <ion-col text-wrap>
                On {{l.mode}}: {{l.distance}}
              </ion-col>
            </ion-row>
            <div *ngIf="l.showDetails">
              <div text-wrap class="subItemSteps" *ngFor="let s of l.steps" (click)="showToast(s.direction, 3000)">
                {{s.direction}}
              </div>
            </div>
          </ion-item>
        </div>
      </ion-item>
    </ion-list>
  </div>
</ion-content>